<template>
	<template if:true={responses}>

		<template for:each={responses} for:item="questionary">
			<template if:true={questionary.isText}>
				<div key={questionary.Id} style="display:flex">
					<div style="width: 90% align:left">
						<!--<lightning-input key={questionary.Id} name={questionary.question} data-key={questionary.Id}
							data-con={questionary.conditional} type="text" label={questionary.question}
							onchange={handleChange} value={questionary.value} required={questionary.required}>
							<lightning-icon  size="xx-small" alternative-text="help" icon-name="utility:info" title="Name" variant="info"></lightning-icon>
						</lightning-input>-->
						<label class="slds-form-element__label">
    						<abbr class="slds-required" title="required">*</abbr>
    						<span class="slds-m-right_x-small">{questionary.question}</span>
    						<lightning-helptext content={questionary.helptext}></lightning-helptext>
						</label>
						<lightning-input type="text"  value={questionary.value} data-con={questionary.conditional}
						key={questionary.Id} name={questionary.question} data-key={questionary.Id}
						onchange={handleChange}></lightning-input>
					</div>
					<div>
						<template if:true={questionary.Rythm__Flag__c}>
							<lightning-icon key={questionary.Id} icon-name="action:priority" size="xx-small"
								onclick={openChatHandler}>
							</lightning-icon>
						</template>
						<!-- <template if:true={questionary.Flag__c}>
							<lightning-icon key={questionary.Id} icon-name="action:priority" size="xx-small">
							</lightning-icon>
						</template> -->
					</div>
				</div>
			</template>
			<template if:true={questionary.isPicklist}>
				<div key={questionary.Id} style="display:flex">

					<div style="width: 90% align:left">
						<lightning-combobox key={questionary.Id} data-key={questionary.Id}
							data-con={questionary.conditional} name={questionary.question} label={questionary.question}
							value={questionary.value} options={questionary.optionsWrapper.pickListOptions}
							onchange={handleChange} required={questionary.required} field-level-help={questionary.helptext}>
						</lightning-combobox>
					</div>
					<div>
						<template if:true={questionary.Rythm__Flag__c}>
							<lightning-icon key={questionary.Id} icon-name="action:priority" size="xx-small"
								onclick={openChatHandler}>
							</lightning-icon>
						</template>
					</div>
				</div>
			</template>
			<template if:true={questionary.isMultiPicklist}>
				<div key={questionary.Id} style="display:flex">
					<div style="width: 90% align:left">
						<lightning-dual-listbox key={questionary.Id} data-key={questionary.Id}
							data-con={questionary.conditional} name={questionary.question} label={questionary.question}
							options={questionary.optionsWrapper.multiPickListOptions} size="4" onchange={handleChange}
							value={questionary.optionsWrapper.selectedListOptions} field-level-help={questionary.helptext}>
						</lightning-dual-listbox>
					</div>
					<div>
						<template if:true={questionary.Rythm__Flag__c}>
							<lightning-icon key={questionary.Id} icon-name="action:priority" size="xx-small"
								onclick={openChatHandler}>
							</lightning-icon>
						</template>
					</div>
				</div>
			</template>
			<template if:true={questionary.isDate}>
				<div key={questionary.Id} style="display:flex">
					<div style="width: 90% align:left">
						<!--<lightning-input key={questionary.Id} data-key={questionary.Id}
							data-con={questionary.conditional} name={questionary.question} value={questionary.value}
							label={questionary.question} type="date" onchange={handleChange}></lightning-input>-->
							<label class="slds-form-element__label">
    						<abbr class="slds-required" title="required">*</abbr>
    						<span class="slds-m-right_x-small">{questionary.question}</span>
    						<lightning-helptext content={questionary.helptext}></lightning-helptext>
						</label>
						<lightning-input type="date"  value={questionary.value} data-con={questionary.conditional}
						key={questionary.Id} name={questionary.question} data-key={questionary.Id}
						  onchange={handleChange}></lightning-input>
					</div>
					<div>
						<template if:true={questionary.Rythm__Flag__c}>
							<lightning-icon key={questionary.Id} icon-name="action:priority" size="xx-small"
								onclick={openChatHandler}>
							</lightning-icon>
						</template>
					</div>
				</div>
			</template>
			<template if:true={questionary.isCheckbox}>
				<div key={questionary.Id} style="display:flex">
					<div style="width: 90% align:left">
						<b key={questionary.Id}>
														<lightning-formatted-text value={questionary.question} title={questionary.question} key={questionary.Id} data-con = {questionary.conditional} data-key={questionary.Id} name={questionary.question}></lightning-formatted-text>
													</b>
						<template key={questionary.Id} data-key={questionary.Id}
							for:each={questionary.optionsWrapper.checkboxOptions} for:item="option">
							<div key={option.id}>
								<!--<lightning-input type="checkbox" label={option.label} data-con={questionary.conditional}
									value={option.isChecked} onchange={handleChange}>
								</lightning-input>-->
								<label class="slds-form-element__label">
    						<abbr class="slds-required" title="required">*</abbr>
    						<span class="slds-m-right_x-small">{option.label}</span>
    						<lightning-helptext content={questionary.helptext}></lightning-helptext>
						</label>
						<lightning-input type="checkbox" value={questionary.value} data-con={questionary.conditional}
						key={option.id} onchange={handleChange} ></lightning-input>
							</div>
						</template></div>
					<div>
						<template if:true={questionary.Rythm__Flag__c}>
							<lightning-icon key={questionary.Id} icon-name="action:priority" size="xx-small"
								onclick={openChatHandler}>
							</lightning-icon>
						</template>
					</div>
				</div>
			</template>
			<template if:true={questionary.isNumber}>
				<div key={questionary.Id} style="display:flex">
					<div style="width: 90% align:left">
						<!--<lightning-input key={questionary.Id} data-key={questionary.Id}
							data-con={questionary.conditional} name={questionary.question} value={questionary.value}
							label={questionary.question} type="phone" onchange={handleChange}></lightning-input>-->
							<label class="slds-form-element__label">
    						<abbr class="slds-required" title="required">*</abbr>
    						<span class="slds-m-right_x-small">{questionary.question}</span>
    						<lightning-helptext content={questionary.helptext}></lightning-helptext>
						</label>
						<lightning-input type="phone"  value={questionary.value} data-con={questionary.conditional}
						key={questionary.Id} name={questionary.question} data-key={questionary.Id}
						onchange={handleChange}></lightning-input>
					</div>
					<div>
						<template if:true={questionary.Rythm__Flag__c}>
							<lightning-icon key={questionary.Id} icon-name="action:priority" size="xx-small"
								onclick={openChatHandler}>
							</lightning-icon>
						</template>
					</div>
				</div>
			</template>
			<template if:true={questionary.isEmail}>
				<div key={questionary.Id} style="display:flex">
					<div style="width: 90% align:left">
						<!--<lightning-input key={questionary.Id} data-key={questionary.Id}
							data-con={questionary.conditional} name={questionary.question} value={questionary.value}
							label={questionary.question} type="email" onchange={handleChange}></lightning-input>-->
							<label class="slds-form-element__label">
    						<abbr class="slds-required" title="required">*</abbr>
    						<span class="slds-m-right_x-small">{questionary.question}</span>
    						<lightning-helptext content={questionary.helptext}></lightning-helptext>
						</label>
						<lightning-input type="email"  value={questionary.value} data-con={questionary.conditional}
						key={questionary.Id} name={questionary.question} data-key={questionary.Id}
						onchange={handleChange}></lightning-input>
					</div>
					<div>
						<template if:true={questionary.Rythm__Flag__c}>
							<lightning-icon key={questionary.Id} icon-name="action:priority" size="xx-small"
								onclick={openChatHandler}>
							</lightning-icon>
						</template>
					</div>
				</div>
			</template>
			<template if:true={questionary.isRadio}>
				<div key={questionary.Id} style="display:flex">
					<div style="">
						<!--<lightning-radio-group key={questionary.Id} data-key={questionary.Id}
							data-con={questionary.conditional} name={questionary.question} onchange={handleChange}
							label={questionary.question} options={questionary.optionsWrapper.radioOptions}
							value={questionary.value} type="radio">
						</lightning-radio-group>-->
						<lightning-radio-group key={questionary.Id} data-key={questionary.Id}
							data-con={questionary.conditional} name={questionary.question} onchange={handleChange}
							options={questionary.optionsWrapper.radioOptions}
							value={questionary.value} type="radio">
						</lightning-radio-group>
						<label class="slds-form-element__label">
    						<abbr class="slds-required" title="required">*</abbr>
    						<span class="slds-m-right_x-small">{questionary.question}</span>
    						<lightning-helptext content={questionary.helptext}></lightning-helptext>
						</label>
						
					</div>
					<div>
						<template if:true={questionary.Rythm__Flag__c}>
							<lightning-icon key={questionary.Id} icon-name="action:priority" size="xx-small"
								onclick={openChatHandler}>
							</lightning-icon>
						</template>
					</div>

				</div>
			</template>
			<template if:true={questionary.showUpload}>
				<lightning-button key={questionary.Id} variant="brand" label="Upload">
				</lightning-button>
			</template>
			<!-- Write Here for Conditional Questioning  -->
			<template if:true={questionary.Children} key={questionary.Id}>
				<template if:true={visible} key={questionary.Id}>
					<c-questionnaire-child-cmp key={questionary.Id} input={questionary.Children}>
					</c-questionnaire-child-cmp>
				</template>
			</template>
			<template if:true={questionary.Children}>
			<!-- <h1>Hello Into Recursion</h1> -->
			<template for:each={questionary.Children} for:item="childquestion">
				<template if:true={childquestion.isdisplay}>
					<h1 key={childquestion.isdisplay}>Hello</h1>
					<c-rtmvpc-render-question-template responses={questionary.Children} key={childquestion.isdisplay}>
					</c-rtmvpc-render-question-template>
				</template>
				<template if:false={childquestion.isdisplay}>
					<!-- <h1 key={childquestion.isdisplay}>Hello world {childquestion}</h1> -->
					<c-rtmvpc-render-question-template responses={questionary.Children} key={childquestion.isdisplay}>
					</c-rtmvpc-render-question-template>
				</template>
			</template>
		</template> 
		</template>

		<!--More icon please visit : https://www.lightningdesignsystem.com/icons/ -->

	</template>

	<!-- <div class="slds-m-top_large" style="width: 30%; height: 300px;" data-id="caddisc">
											<div class="cad-sec_container_nobdr cad-sec_vcontainer">
												<div class="cad-top_back_container">
													<button class="cad_actions" data-id="buttoncaddisc" onclick={handleRightButtonClick}>
														<i class="las la-chevron-circle-left"></i>
														<span class="textstyle01"></span>
													</button>
												</div>
												<div class="cad-tophead-details cad-sec_vcontainer1">
													<div class="slds-grid slds-wrap slds-gutters_small">

														<div class="slds-col slds-size_12-of-12 slds-text-align_center">
															<h2 class="slds-p-top_medium slds-p-bottom_xx-small" style="font-size: 20px !important;">
															<strong><b>Reviews/ Comments</b></strong>
															</h2>
														</div>

													</div>
												</div>
												<div class="cad-sec_vcontainer2bdr">
													<div class="slds-p-horizontal_small slds-scrollable_y">
														
														<template if:true={Conversation_History__c}>
															<template if:true={Conversation_History__c.chatHistory}>
																<template for:each={Conversation_History__c.chatHistory}
																	for:item="chatItem">
																	<div key={chatItem}
																		class="slds-p-around_small slds-m-bottom_small slds-border_bottom slds-is-relative">
																		<div class="slds-text-align_right">
																			<div class="cad-approved">
																				{chatItem.recipient}</div>

																		</div>
																		<h3>{chatItem.subject}</h3>
																		<div
																			class="slds-text-align_right cad-datentime">
																			{chatItem.date}
																		</div>&nbsp;
																	</div>
																</template>
															</template>
															<template if:false={Conversation_History__c.chatHistory}>
																<div
																	style="width: 100%; height: 100%; display:flex; justify-content: center; align-items: center; padding-top: 50px">
																	<span>No Conversation History</span>
																</div>
															</template>
														</template>
														<template if:false={Conversation_History__c}>
															<div
																style="width: 100%; height: 100%; display:flex; justify-content: center; align-items: center; padding-top: 50px">
																<span>No Conversation History</span>
															</div>
														</template>
													</div>
												</div>
												<div class="cad-sec_vcontainer3 slds-border_top slds-p-around_small">
													<lightning-textarea placeholder="Type your response here..."
														variant="label-hidden" onchange={chatChangeHandler}>
													</lightning-textarea>
													<lightning-button label="Send" onclick={sendButtonHandler}>
													</lightning-button>
												</div>
											</div>
										</div> -->

	<!-- <div class="cad-cel cad-w300  cad-disc cad-pl8" data-id="caddisc">
										<div class="cad-sec_container_nobdr cad-sec_vcontainer">
											<div class="cad-top_back_container">
												<button class="cad_actions" data-id="buttoncaddisc" onclick={handleRightButtonClick}>
														<i class="las la-chevron-circle-left"></i>
														<span class="textstyle01"></span>
													</button>
											</div>
											<div class="cad-tophead-details cad-sec_vcontainer1">
												<div class="slds-grid slds-wrap slds-gutters_small">

													<div class="slds-col slds-size_12-of-12 slds-text-align_center">
														<h4 class="slds-p-top_x-small slds-p-bottom_xx-small">
															Selected Question Current Status
														</h4>
														<div class="">
															<div class="cad-approved">Approved</div>
														</div>
													</div>

												</div>
											</div>
											<div class="cad-sec_vcontainer2bdr">
												<div class="slds-p-horizontal_small slds-scrollable_y">
													<div
														class="slds-p-around_small slds-m-bottom_small slds-border_bottom slds-is-relative">
														<div class="slds-text-align_right">
															<div class="cad-approved">Approved</div>
															<div class="slds-text-align_right cad-datentime">
																05/05/2023</div>&nbsp;
														</div>
														<h3>Perform Quarterly Business Review</h3>
														<div>Perform Quarterly Business Review</div>
													</div>
												</div>
											</div>
											<div class="cad-sec_vcontainer3 slds-border_top slds-p-around_small">
												<lightning-textarea placeholder="Type your response here..."
													variant="label-hidden">
												</lightning-textarea>
												<lightning-button label="Send" onclick={handleRightButtonClick}>
												</lightning-button>
											</div>
										</div>
									</div> -->

</template>