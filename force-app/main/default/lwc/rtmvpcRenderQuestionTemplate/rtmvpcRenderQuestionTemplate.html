<!-- This html is used to display different types of questions in sections -->
<template>
	<template if:true={responses}>
		<template for:each={responses} for:item="questionary">
			<div key={questionary.Id} class="temp_question_border-bottom">
				
					<div class="qactivelabelcont"  data-id={questionary.Id}
						onclick={highlightQuestionHandler}>
						<div
							class="slds-grid slds-text-align_left slds-p-top_x-small slds-p-horizontal_medium slds-p-bottom_small">
							<div class="slds-col">
								<!-- Question Number Starts here -->
								<span class="slds-form-element__labelttnor no-wordbreak">
								{questionary.snumber}
								</span>
								<!-- Question Number Ends here -->
							</div>
							<div class="slds-col slds-size_12-of-12">
								<div class="slds-grid slds-wrap">
									<div class="slds-col slds-size_12-of-12" data-id={questionary.Id}
										onclick={openChatHandler}>
										<span class="slds-form-element__labelttnor">
										<!-- Question & Mandatory Starts here -->
											<template if:true={questionary.required}>
												<abbr class="slds-required" title="required">*</abbr>
											</template>
											{questionary.question}
										<!-- Question & Mandatory Ends here -->
										</span>
										<!-- Help icon Starts here -->
										<template if:true={questionary.helptext}>
											<lightning-helptext content={questionary.helptext}></lightning-helptext>
										</template>
										<!-- Help icon Ends here -->
									</div>
									<div class="slds-col slds-size_11-of-12 slds-p-top_xx-small">
										<!-- Form Control Starts here -->
										<template if:true={questionary.isText}>
											<lightning-input name={questionary.question}
												data-key={questionary.Id} data-con={questionary.conditional} type="text"
												variant="label-hidden" disabled={questionary.isEditable}
												onchange={handleChange} value={questionary.value}
												required={questionary.required} onclick={openChatHandler}>
												<lightning-icon size="xx-small" alternative-text="help"
													icon-name="utility:info" title="Name" variant="info">
												</lightning-icon>
											</lightning-input>
										</template>
										<template if:true={questionary.isNumber}>
											<lightning-input name={questionary.question}
												data-key={questionary.Id} data-con={questionary.conditional} type="Number"
												variant="label-hidden" disabled={questionary.isEditable}
												onchange={handleChange} value={questionary.value}
												required={questionary.required} onclick={openChatHandler}>
												<lightning-icon size="xx-small" alternative-text="help"
													icon-name="utility:info" title="Name" variant="info">
												</lightning-icon>
											</lightning-input>
										</template>
										<template if:true={questionary.isTextArea}>
											<lightning-input-rich-text  name={questionary.question}
												data-key={questionary.Id} data-con={questionary.conditional} type="text"
												variant="label-hidden" disabled={questionary.isEditable}
												onchange={handleChange} value={questionary.value}
												required={questionary.required} onclick={openChatHandler}>
												<lightning-icon size="xx-small" alternative-text="help"
													icon-name="utility:info" title="Name" variant="info">
												</lightning-icon>
											</lightning-input-rich-text>
										</template>
										<template if:true={questionary.isPicklist}>
											<lightning-combobox  data-key={questionary.Id}
												data-con={questionary.conditional} name={questionary.question}
												variant="label-hidden" value={questionary.value}
												options={questionary.optionsWrapper.pickListOptions}
												disabled={questionary.isEditable} onchange={handleChange}
												required={questionary.required} onclick={openChatHandler}>
											</lightning-combobox>
										</template>
										<template if:true={questionary.isMultiPicklist}>
											<lightning-dual-listbox  data-key={questionary.Id}
												data-con={questionary.conditional} name={questionary.question}
												variant="label-hidden"
												options={questionary.optionsWrapper.multiPickListOptions} size="4"
												disabled={questionary.isEditable} onchange={handleChange}
												value={questionary.optionsWrapper.selectedListOptions}
												field-level-help={questionary.helptext} disable-reordering="true" onclick={openChatHandler}>
											</lightning-dual-listbox>
										</template>
										<template if:true={questionary.isDate}>
											<lightning-input type="date" value={questionary.value}
												data-con={questionary.conditional} 
												name={questionary.question} data-key={questionary.Id}
												disabled={questionary.isEditable} onchange={handleChange}
												variant="label-hidden" style="max-width:150px;" onclick={openChatHandler}>
											</lightning-input>
										</template>
										<template if:true={questionary.isDateTime}>
											<lightning-input type="datetime" value={questionary.value}
												data-con={questionary.conditional} 
												name={questionary.question} data-key={questionary.Id}
												disabled={questionary.isEditable} onchange={handleChange}
												variant="label-hidden" style="max-width:150px;" onclick={openChatHandler}>
											</lightning-input>
										</template>
										<template if:true={questionary.isCheckbox}>
											<template if:true={checkedLabel}>
												<lightning-input type="Checkbox" value={questionary.value}
													variant="label-hidden" data-checkbox={questionary.Id}
													data-con={questionary.conditional}
													data-key={questionary.Id} onchange={handleChange}
													checked={questionary.value} onclick={openChatHandler} disabled={questionary.isEditable}>
												</lightning-input>
											</template>
											<template if:false={checkedLabel}>
												<lightning-input type="Checkbox" value={questionary.value}
													variant="label-hidden" data-checkbox={questionary.Id}
													data-con={questionary.conditional}
													data-key={questionary.Id} onchange={handleChange} unchecked="true" onclick={openChatHandler}
													disabled={questionary.isEditable} >
												</lightning-input>
											</template>
										</template>
										<template if:true={questionary.isPhone}>
											<lightning-input type="tel" value={questionary.value}
												data-con={questionary.conditional} variant="label-hidden"
												style="max-width:150px;" 
												name={questionary.question} data-key={questionary.Id}
												placeholder="xxx-xxx-xxxx" disabled={questionary.isEditable}
												onchange={handleChange} pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" onclick={openChatHandler}>
											</lightning-input>
										</template>
										<template if:true={questionary.isCurrency}>
											<lightning-input type="number" formatter="currency"
												data-currency={questionary.Id} variant="label-hidden"
												value={questionary.value} data-con={questionary.conditional}
												name={questionary.question}
												data-key={questionary.Id} disabled={questionary.isEditable}
												onchange={handleChange} onclick={openChatHandler}>
											</lightning-input>
										</template>
										<template if:true={questionary.isPercent}>
											<lightning-input type="number" formatter="percent-fixed"
												data-currency={questionary.Id} variant="label-hidden"
												value={questionary.value} data-con={questionary.conditional}
												name={questionary.question}
												data-key={questionary.Id} disabled={questionary.isEditable}
												onchange={handleChange} onclick={openChatHandler}>
											</lightning-input>
										</template>
										<template if:true={questionary.isEmail}>
											<lightning-input type="email" value={questionary.value}
												data-con={questionary.conditional} variant="label-hidden"
												name={questionary.question}
												data-key={questionary.Id} disabled={questionary.isEditable}
												onchange={handleChange} placeholder="abc@gmail.com" onclick={openChatHandler}>
											</lightning-input>
										</template>
										<template if:true={questionary.isRadio}>
											<lightning-radio-group data-key={questionary.Id}
												variant="label-hidden" data-con={questionary.conditional}
												name={questionary.question} onchange={handleChange}
												options={questionary.optionsWrapper.radioOptions}
												value={questionary.value} disabled={questionary.isEditable}
												type="radio" onclick={openChatHandler}>
											</lightning-radio-group>
										</template>
										<!-- Form Control Ends here -->
									</div>
									<div class="slds-col slds-size_1-of-12 slds-text-align_right">
										<!-- Flag Starts here -->
										<template if:true={issupplier}>
											<template if:true={questionary.Rhythm__Flag__c}>
												<lightning-icon data-id={questionary.Id} 
													icon-name="utility:priority" size="small"
													class="cib-flag slds-m-right_medium" onclick={openChatHandler}>
												</lightning-icon>
											</template></template>
										<template if:true={questionary.customerFlag}>
											<template if:true={questionary.Rhythm__Flag__c}>
												<lightning-icon data-id={questionary.Id} 
													icon-name="utility:priority" size="small"
													class="cib-flag slds-m-right_medium" onclick={openReview}>
												</lightning-icon>
											</template>
											<template if:false={questionary.Rhythm__Flag__c}>
												<lightning-icon data-id={questionary.Id} 
													icon-name="utility:priority" size="small"
													class="cib-forward:hover slds-m-right_medium" onclick={openReview}>
												</lightning-icon>
											</template>
										</template>
										<!-- Flag Ends here -->
									</div>
								</div>
							</div>
						</div>

					</div>

				<!-- File upload -->
				<template if:true={questionary.showUpload}>
					<!-- <lightning-button key={questionary.Id} variant="brand" label="Upload"></lightning-button> -->
					<!-- <lightning-file-upload
							key={questionary.Id} label="Upload Files"
							name="uploadFiles"
							accept=".pdf"
							record-id={questionary.Id} onuploadfinished={uploadFilesHandler} multiple></lightning-file-upload> -->
					<!-- variant="label-hidden" -->
					<div class="slds-form-element slds-p-left_x-small slds-text-align_left">
						<!-- 
						<span class="slds-form-element__label" id="file-selector-primary-label-105"></span>
						<div class="slds-form-element__control">
							<div class="slds-file-selector slds-file-selector_files">
								<div class="slds-file-selector__dropzone">
									<input data-id={questionary.Id} onchange={uploadFilesHandler} type="file" class="slds-file-selector__input slds-assistive-text" accept="image/*, .pdf, .csv, .docx" id="file-upload-input-107" aria-labelledby="file-selector-primary-label-105 file-selector-secondary-label106" />
									<label class="slds-file-selector__body" for="file-upload-input-107" id="file-selector-secondary-label106">
										<span class="slds-file-selector__button slds-button slds-button_neutral">
											<span class=" slds-button__icon slds-button__icon_left" style="margin-top:-17px;" aria-hidden="true">
												<lightning-icon icon-name="utility:attach" size="x-small"></lightning-icon>
											</span>
											Attach Files
										</span>
									</label>
								</div>
							</div>
						</div>
						<template if:true={questionary.showUploadProgress} >
							<div class="slds-m-around_small cad-tnailcard">
								<div class="cad-tnailcardinner"></div>
							</div>
						</template>
						-->
						<!-- <span class="slds-form-element__label" id={questionary.spanId} ></span> -->

						<div class="slds-grid slds-text-align_left slds-p-left_x-small slds-p-bottom_small">
							<div class="slds-col">
								<!-- Question Number Starts here -->
								<span class="slds-form-element__labelttnor no-wordbreak">
														&nbsp;
														</span>
								<!-- Question Number Ends here -->
							</div>
							<div class="slds-col slds-size_12-of-12">
								<div class="slds-grid slds-wrap">
									<div class="slds-col slds-size_12-of-12">

										<div class="slds-file-selector slds-file-selector_files">
											<!-- <div class="slds-file-selector__dropzone">
												<input data-id={questionary.Id} onchange={uploadFilesHandler} disabled={questionary.isEditable} type="file" class="slds-file-selector__input slds-assistive-text" accept="image/*, .pdf, .csv, .docx" id={questionary.inputId} aria-labelledby={questionary.inputAriaBy} />
												<label class="slds-file-selector__body" for={questionary.inputId} id={questionary.labelId} >
													<span class="slds-file-selector__button slds-button slds-button_neutral">
														<span class="slds-button__icon slds-button__icon_left" style="margin-top:-17px;" aria-hidden="true">
															<lightning-icon icon-name="utility:attach" size="x-small"></lightning-icon>
														</span>
														Attach Files
													</span>
												</label>
											</div> -->
											<lightning-input type="file"
												accept=".xlsx, .xls, .csv, .png, .doc, .docx, .pdf" label="Attachment" data-id={questionary.Id}
												onchange={uploadFilesHandler}></lightning-input>
											<p>limit size : 3.5mb</p>
										</div>

									</div>

									<div class="slds-col slds-size_12-of-12">

										<div class="slds-grid" style="width:calc(100% - 35px); overflow-x:auto">
											<!-- <template if:true={showUploadProgress}>
												<div class="slds-m-around_small cad-tnailcard">
													<div class="cad-tnailcardinner">
													</div>
												</div>
											</template> -->
											<template if:true={questionary.Files__c}>
												<template for:each={questionary.Files__c} for:item="file">
													<div class="slds-m-right_small slds-m-vertical_small cad-tnailcard2"
														key={file}>
														<div class="slds-grid slds-wrap">
															<div class="slds-col slds-m-left_x-small slds-m-vertical_xx-small"
																style="width:0px" title="Click to Download">

																<template if:true={file.isPng}>
																	<a href={file.url}>
																		<lightning-icon icon-name="doctype:image"
																			size="small">
																		</lightning-icon>
																	</a>
																	<template if:true={questionary.isEditable}>
																		<lightning-button-icon icon-name="utility:close"
																			variant="bare" data-id={questionary.Id}
																			data-key={file.name} onclick={deleteFile}
																			alternative-text="Delete file"
																			class="closericon">
																		</lightning-button-icon>
																	</template>
																</template>
																<template if:true={file.isPdf}>
																	<a href={file.url}>
																		<lightning-icon icon-name="doctype:pdf"
																			size="small">
																		</lightning-icon>
																	</a>
																	<template if:true={questionary.isEditable}>
																		<lightning-button-icon icon-name="utility:close"
																			variant="bare" data-id={questionary.Id}
																			data-key={file.name} onclick={deleteFile}
																			alternative-text="Delete file"
																			class="closericon">
																		</lightning-button-icon>
																	</template>
																</template>
																<template if:true={file.isDocx}>
																	<a href={file.url}>
																		<lightning-icon icon-name="doctype:word"
																			size="small">
																		</lightning-icon>
																	</a>
																	<template if:true={questionary.isEditable}>
																		<lightning-button-icon icon-name="utility:close"
																			variant="bare" data-id={questionary.Id}
																			data-key={file.name} onclick={deleteFile}
																			alternative-text="Delete file"
																			class="closericon">
																		</lightning-button-icon>
																	</template>
																</template>
																<template if:true={file.isCsv}>
																	<a href={file.url}>
																		<lightning-icon icon-name="doctype:csv"
																			size="small">
																		</lightning-icon>
																	</a>
																	<template if:true={questionary.isEditable}>
																		<lightning-button-icon icon-name="utility:close"
																			variant="bare" data-id={questionary.Id}
																			data-key={file.name} onclick={deleteFile}
																			alternative-text="Delete file"
																			class="closericon">
																		</lightning-button-icon>
																	</template>
																</template>

															</div>
															<div class="slds-col" style="overflow:hidden; width:100px;">
																<a href={file.url}>
																	<div class="slds-m-around_x-small"
																		style="font-size:12px; overflow:hidden; white-space:nowrap; text-overflow:ellipsis;"
																		title={file.name}>
																		{file.name}
																	</div>
																</a>
															</div>
														</div>
													</div>
												</template>
											</template>
										</div>

									</div>

								</div>
							</div>
						</div>
					</div>
				</template>
				<!-- <template if:true={questionary.Children}>
					<template for:each={questionary.Children} for:item="childquestion">
						<template if:true={childquestion.isdisplay}>
							<div key={childquestion.isdisplay} class="temp_dashed-border-top slds-m-left_large">
								<c-rtmvpc-render-question-template selectquestion={selectquestionHandler}
									responses={questionary.Children} key={childquestion.isdisplay}>
								</c-rtmvpc-render-question-template>
							</div>
						</template>
					</template>
				</template> -->
			</div>
		</template>
	</template>
</template>