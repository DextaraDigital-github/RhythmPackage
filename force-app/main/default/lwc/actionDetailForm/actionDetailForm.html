<template>
	<div class="rtmvpc-card slds-p-around_medium">
		<div class="c-container">
			<lightning-tabset>
			<lightning-tab variant="base" label="Details" value="Details" onactive={handleDetailClick}></lightning-tab>
			<lightning-tab variant="base" label="Files" value="Files"   onactive={handleDetailClick}></lightning-tab>
			</lightning-tabset>
			<template if:false={showForm}>
			<lightning-layout multiple-rows>
				<template if:true={showToast}>
					<c-Show-Toast-Message message-from-component={totastmessage} is-show-modal={showToast}
						is-sucess={success} onclosetoast={closeToastHandler}></c-Show-Toast-Message>
				</template>
				<template for:each={actionFormData} for:item="rec">
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid">
							<h1 class="slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Action Item
								Name
							</h1>
							<h1 class="slds-col slds-size_2-of-3 slds-form-element__control">{rec.Name}</h1>
						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid">
							<h1 class="slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Supplier Name
							</h1>
							<h1 class="slds-col slds-size_2-of-3 slds-form-element__control">
								{rec.Rhythm__Supplier__r.Name}</h1>
						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small " key={rec}>
						<div class="slds-grid ">
							<h1 class="slds-col slds-size_1-of-3 slds-form-element__label" title="Field 1">Related
								Record</h1>
							<p class="slds-col slds-size_2-of-3 slds-form-element__control">
								{rec.Rhythm__Related_Record__r.Name}</p>
						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid ">
							<h1 class="slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Action Item
								Description
							</h1>
							<p class="slds-col slds-size_2-of-3 slds-form-element__control">
								{rec.Rhythm__Action_Item_Description__c}</p>
						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid ">
							<h1 class="slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Due Date
							</h1>
							<p class="slds-col slds-size_2-of-3 slds-form-element__control">{rec.Rhythm__Due_Date__c}
							</p>
						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid ">
							<h1 class="slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Priority
							</h1>
							<p class="slds-col slds-size_2-of-3 slds-form-element__control">{rec.Rhythm__Priority__c}
							</p>
						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid ">
							<h1 class="slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Flag Status
							</h1>
							<template if:false={isSave}>
								<template if:false={expired}>
								<img src={greenFlagUrl} style="height:20px; width:20px;" />
								</template>
								<template if:true={expired}>
									<img src={redFlagUrl} style="height:20px; width:20px;" />
								</template>
                         </template>
								<template if:true={isSave}>
									<img src={orangeFlagUrl}  style="height:20px; width:20px;" />
                    </template>
						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid ">
							<h1 class="slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Related Module
							</h1>
							<p class="slds-col slds-size_2-of-3 slds-form-element__control">
								{rec.Rhythm__Related_module__c}</p>
						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid ">
							<h1 class=" slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Ownership
							</h1>
							<p class="slds-col slds-size_2-of-3 slds-form-element__control">
								{rec.Rhythm__OwnershipName__c}</p>
						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid">
							<h1 class=" slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Assigned To
							</h1>
							<p class="slds-col slds-size_2-of-3 slds-form-element__control">
								{rec.Rhythm__Assigned_To__r.Name}</p>
						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid ">
							<h1 class="slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Status
							</h1>
							<div class="slds-col slds-size_1-of-3 slds-form-element__control">
								<template if:true={isSave}>
									<lightning-combobox options={options} data-id="Rhythm__Status__c"
										onchange={handleChange} value={rec.Rhythm__Status__c} variant="label-hidden">
									</lightning-combobox>
								</template>
								<template if:false={isSave}>
									<lightning-combobox options={options} data-id="Rhythm__Status__c"
										variant="label-hidden" onchange={handleChange} value={rec.Rhythm__Status__c}
										disabled="true"></lightning-combobox>
								</template>
							</div>

						</div>
					</lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
                <div class="slds-grid ">
                    <h1 class="slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Created by
                    </h1>
                    <p class="slds-col slds-size_2-of-3 slds-form-element__control">{rec.Rhythm__created__c}</p>
                </div>
            </lightning-layout-item>
					<lightning-layout-item size="6" padding="around-small" key={rec}>
						<div class="slds-grid ">
							<h1 class=" slds-col slds-size_1-of-3 slds-form-element__label" title="Field2">Comments
							</h1>
							<div class="slds-col slds-size_1-of-3 slds-form-element__control">
								<template if:true={isSave}>
									<lightning-textarea  type="text" onchange={handleChange} variant="label-hidden"
										value={rec.Rhythm__Comments__c} data-id="Rhythm__Comments__c">
									</lightning-textarea >
								</template>
								<template if:false={isSave}>
									<lightning-textarea type="text" onchange={handleChange} variant="label-hidden"
										value={rec.Rhythm__Comments__c} data-id="Rhythm__Comments__c" disabled="true">
									</lightning-textarea>
								</template>

							</div>
						</div>
					</lightning-layout-item>
				</template>
			</lightning-layout>
			<div class="slds-grid slds-grid_align-center">
			<template if:true={isButton}>
			<template if:true={isSubmit}>
				<button class="slds-button slds-button_brand slds-float_right" onclick={handleSave}>Submit</button>
			</template>
			<template if:false={isSubmit}>
				<button class="slds-button slds-button_brand slds-float_right" onclick={handleCommentSave}>Save</button>
			</template>
			</template>
			</div>
			</template>
			<template if:true={showForm}>
	<!-- S3 Code -->
						<c-aws-s3-files record-id={actionid} object-api-name={objectApiName} show-upload="true" isupload={isSave}></c-aws-s3-files>
					<!-- S3 Code -->
			</template>
			<template if:true={showPopup}>
				<section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01"
					class="slds-modal slds-fade-in-open">
					<div class="slds-modal__container">
						<div class="slds-modal__header">
							<h1 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Close Action Item</h1>
						</div>
						<div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
							<p>Are you sure you want to close the Action Item?</p>
						</div>
						<div class="slds-modal__footer">
							<button class="slds-button slds-button_brand" onclick={handleCloseButton}>Yes</button>
							<button class="slds-button slds-button_neutral" aria-label="Cancel and close" onclick={handleCancelButton}>No</button>
							
						</div>
					</div>
				</section>
				<div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
			</template>
		</div>
	</div>
</template>